{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/username-request/webpack/bootstrap","webpack://@fof/username-request/webpack/runtime/compat get default export","webpack://@fof/username-request/webpack/runtime/define property getters","webpack://@fof/username-request/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/username-request/webpack/runtime/make namespace object","webpack://@fof/username-request/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/username-request/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@fof/username-request/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/username-request/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/username-request/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/username-request/./src/forum/components/RequestModal.js","webpack://@fof/username-request/external root \"flarum.core.compat['forum/components/HeaderSecondary']\"","webpack://@fof/username-request/external root \"flarum.core.compat['forum/components/NotificationsDropdown']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://@fof/username-request/./src/forum/components/ActionModal.js","webpack://@fof/username-request/./src/forum/components/RequestsList.js","webpack://@fof/username-request/./src/forum/components/RequestsDropdown.js","webpack://@fof/username-request/./src/forum/components/ResultsModal.js","webpack://@fof/username-request/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/username-request/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://@fof/username-request/./src/forum/states/RequestsListState.js","webpack://@fof/username-request/external root \"flarum.core.compat['common/extenders']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/models/User']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/utils/computed']\"","webpack://@fof/username-request/./src/forum/models/UsernameRequest.ts","webpack://@fof/username-request/external root \"flarum.core.compat['common/components/Page']\"","webpack://@fof/username-request/./src/forum/components/RequestsPage.js","webpack://@fof/username-request/./src/forum/components/ProfilePage.js","webpack://@fof/username-request/./src/forum/extend.ts","webpack://@fof/username-request/./src/forum/index.ts","webpack://@fof/username-request/./src/forum/extenders/addRequestSetting.js","webpack://@fof/username-request/./src/forum/extenders/addRequestDropdown.js","webpack://@fof/username-request/./src/forum/extenders/checkForApproval.js","webpack://@fof/username-request/./src/forum/extenders/addProfilePage.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SettingsPage'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","import app from 'flarum/forum/app';\nimport Stream from 'flarum/common/utils/Stream';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\n\nexport default class RequestModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.username = Stream(this.attrs.nickname ? app.session.user.displayName() : app.session.user.username());\n\n    this.userRequestAttr = `last${this.attrs.nickname ? 'Nickname' : 'Username'}Request`;\n\n    this.lastRequest = app.session.user[this.userRequestAttr]();\n\n    if (this.lastRequest) this.username(this.lastRequest.requestedUsername());\n\n    this.success = false;\n\n    this.password = Stream('');\n\n    this.translationPrefix = `fof-username-request.forum.${this.attrs.nickname ? 'nickname' : 'username'}_modals.request`;\n  }\n\n  className() {\n    return 'RequestUsernameModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans(`${this.translationPrefix}.title`);\n  }\n\n  content() {\n    if (this.success) {\n      return (\n        <div className=\"Modal-body\">\n          <div className=\"Form Form--centered\">\n            <p className=\"helpText\">{app.translator.trans(`${this.translationPrefix}.confirmation_message`)}</p>\n            <div className=\"Form-group\">\n              <Button className=\"Button Button--primary Button--block\" onclick={this.hide.bind(this)}>\n                {app.translator.trans(`${this.translationPrefix}.dismiss_button`)}\n              </Button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          {this.lastRequest ? (\n            <p className=\"helpText\">\n              {app.translator.trans(`${this.translationPrefix}.current_request`, {\n                name: this.lastRequest.requestedUsername(),\n              })}\n            </p>\n          ) : (\n            ''\n          )}\n          <div className=\"Form-group\">\n            <input\n              type=\"text\"\n              name=\"text\"\n              className=\"FormControl\"\n              placeholder={app.session.user.username()}\n              bidi={this.username}\n              disabled={this.deleteLoading || this.submitLoading}\n            />\n          </div>\n          {app.forum.attribute('passwordlessSignUp') ? null : (\n            <div className=\"Form-group\">\n              <input\n                type=\"password\"\n                name=\"password\"\n                className=\"FormControl\"\n                placeholder={app.translator.trans('core.forum.change_email.confirm_password_placeholder')}\n                bidi={this.password}\n                disabled={this.deleteLoading || this.submitLoading}\n              />\n            </div>\n          )}\n          <div className=\"Form-group\">\n            {Button.component(\n              {\n                className: 'Button Button--primary Button--block',\n                type: 'submit',\n                loading: this.submitLoading,\n              },\n              app.translator.trans(`${this.translationPrefix}.submit_button`)\n            )}\n          </div>\n          {this.lastRequest ? (\n            <div className=\"Form-group\">\n              {Button.component(\n                {\n                  className: 'Button Button--primary Button--block',\n                  onclick: this.deleteRequest.bind(this),\n                  loading: this.deleteLoading,\n                },\n                app.translator.trans(`${this.translationPrefix}.delete_button`)\n              )}\n            </div>\n          ) : (\n            ''\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  deleteRequest(e) {\n    e.preventDefault();\n\n    this.deleteLoading = true;\n\n    this.lastRequest.delete();\n\n    this.successAlert = app.alerts.show({ type: 'success' }, app.translator.trans(`${this.translationPrefix}.deleted`));\n\n    app.session.user[this.userRequestAttr] = Stream();\n\n    this.hide();\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.alert = null;\n\n    const currentAttr = this.attrs.nickname ? app.session.user.displayName() : app.session.user.username();\n    if (this.username() === currentAttr) {\n      this.hide();\n      return;\n    }\n\n    this.submitLoading = true;\n\n    app.store\n      .createRecord('username-requests')\n      .save(\n        {\n          username: this.username(),\n          forNickname: this.attrs.nickname,\n        },\n        {\n          meta: { password: this.password() },\n          errorHandler: this.onerror.bind(this),\n        }\n      )\n      .then((request) => {\n        app.session.user[this.userRequestAttr] = Stream(request);\n        this.success = true;\n        this.alertAttrs = null;\n      })\n      .catch(() => {})\n      .then(this.loaded.bind(this));\n  }\n\n  onerror(error) {\n    if (error.status === 401) {\n      error.alert.content = app.translator.trans('core.forum.change_email.incorrect_password_message');\n      this.submitLoading = false;\n    }\n\n    super.onerror(error);\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/HeaderSecondary'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/NotificationsDropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/withAttr'];","import app from 'flarum/forum/app';\nimport Button from 'flarum/common/components/Button';\nimport Modal from 'flarum/common/components/Modal';\nimport username from 'flarum/common/helpers/username';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\n\nexport default class ActionModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.request = this.attrs.request;\n\n    this.approved = Stream('Rejected');\n\n    this.reason = Stream('');\n\n    this.translationPrefix = `fof-username-request.forum.${this.request.forNickname() ? 'nickname' : 'username'}_modals.action`;\n  }\n\n  title() {\n    return app.translator.trans(`${this.translationPrefix}.title`);\n  }\n\n  className() {\n    return 'RequestActionModal Modal--medium';\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form\">\n          <h3 className=\"Notification-content\">\n            {app.translator.trans(`${this.translationPrefix}.name`, {\n              name: username(this.request.user()),\n              requestedName: this.request.requestedUsername(),\n            })}\n          </h3>\n          <p className=\"help\">{app.translator.trans(`${this.translationPrefix}.help_text`)}</p>\n          <legend>{app.translator.trans(`${this.translationPrefix}.decision_title`)}</legend>\n          <div className=\"Form-group\">\n            <label className=\"checkbox\">\n              <input\n                type=\"radio\"\n                name=\"approved\"\n                value=\"Approved\"\n                checked={this.approved() === 'Approved'}\n                onclick={withAttr('value', this.approved)}\n              />\n              {app.translator.trans(`${this.translationPrefix}.approval_label`)}\n            </label>\n            <label className=\"checkbox\">\n              <input\n                type=\"radio\"\n                name=\"rejected\"\n                value=\"Rejected\"\n                checked={this.approved() === 'Rejected'}\n                onclick={withAttr('value', this.approved)}\n              />\n              {app.translator.trans(`${this.translationPrefix}.rejected_label`)}\n            </label>\n          </div>\n          {this.approved() === 'Rejected' ? (\n            <div className=\"Form-group\">\n              <legend>{app.translator.trans(`${this.translationPrefix}.reason_title`)}</legend>\n              <div className=\"BasicsPage-reason-input\">\n                <textarea className=\"FormControl\" value={this.reason()} disabled={this.loading} oninput={withAttr('value', this.reason)} />\n              </div>\n            </div>\n          ) : (\n            ''\n          )}\n          <div className=\"Form-group\">\n            {Button.component(\n              {\n                className: 'Button Button--primary Button--block',\n                type: 'submit',\n                loading: this.loading,\n                disabled: this.approved() === 'Rejected' && !this.reason() ? true : false,\n              },\n              app.translator.trans(`${this.translationPrefix}.submit_button`)\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n\n    this.request\n      .save({\n        reason: this.reason(),\n        action: this.approved(),\n      })\n      .then(() => {\n        this.successAlert = app.alerts.show({ type: 'success' }, app.translator.trans(`${this.translationPrefix}.success`));\n      });\n\n    app.cache.username_requests.some((request, i) => {\n      if (request.id() == this.request.id()) {\n        app.cache.username_requests.splice(i, 1);\n      }\n    });\n\n    m.redraw();\n\n    this.hide();\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport icon from 'flarum/common/helpers/icon';\nimport humanTime from 'flarum/common/helpers/humanTime';\nimport ActionModal from './ActionModal';\n\nexport default class FlagList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loading = false;\n  }\n\n  view() {\n    const requests = app.cache.username_requests || [];\n\n    return (\n      <div className=\"NotificationList RequestsList\">\n        <div className=\"NotificationList-header\">\n          <h4 className=\"App-titleControl App-titleControl--text\">{app.translator.trans('fof-username-request.forum.pending_requests.title')}</h4>\n        </div>\n        <div className=\"NotificationList-content\">\n          <ul className=\"NotificationGroup-content\">\n            {requests.length ? (\n              requests.map((request) => {\n                const prefix = request.forNickname() ? 'nickname' : 'username';\n                return (\n                  <li>\n                    <a onclick={this.showModal.bind(this, request)} className=\"Notification Request\">\n                      {avatar(request.user())}\n                      {icon('fas fa-user-edit', { className: 'Notification-icon' })}\n                      <span className=\"Notification-content\">\n                        {app.translator.trans(`fof-username-request.forum.pending_requests.${prefix}_item_text`, {\n                          name: username(request.user()),\n                        })}\n                      </span>\n                      {humanTime(request.createdAt())}\n                      <div className=\"Notification-excerpt\">\n                        {app.translator.trans(`fof-username-request.forum.pending_requests.${prefix}_exerpt`, {\n                          requestedName: request.requestedUsername(),\n                        })}\n                      </div>\n                    </a>\n                  </li>\n                );\n              })\n            ) : !this.loading ? (\n              <div className=\"NotificationList-empty\">{app.translator.trans('fof-username-request.forum.pending_requests.empty_text')}</div>\n            ) : (\n              LoadingIndicator.component({ className: 'LoadingIndicator--block' })\n            )}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n\n  showModal(request) {\n    app.modal.show(ActionModal, { request });\n  }\n}\n","import app from 'flarum/forum/app';\nimport NotificationsDropdown from 'flarum/forum/components/NotificationsDropdown';\n\nimport RequestsList from './RequestsList';\n\nexport default class RequestsDropdown extends NotificationsDropdown {\n  static initAttrs(attrs) {\n    attrs.label = attrs.label || app.translator.trans('fof-username-request.forum.pending_requests.tooltip');\n    attrs.icon = attrs.icon || 'fas fa-user-edit';\n\n    super.initAttrs(attrs);\n  }\n\n  getMenu() {\n    return (\n      <div className={'Dropdown-menu ' + this.attrs.menuClassName} onclick={this.menuClick.bind(this)}>\n        {this.showing ? RequestsList.component({ state: app.usernameRequests }) : ''}\n      </div>\n    );\n  }\n\n  goToRoute() {\n    m.route.set(app.route('username_requests'));\n  }\n\n  getUnreadCount() {\n    if (app.cache.username_requests) {\n      return app.cache.username_requests.length;\n    }\n    return app.forum.data.relationships.username_requests.data.length;\n  }\n\n  getNewCount() {\n    if (app.cache.username_requests) {\n      return app.cache.username_requests.length;\n    }\n    return app.forum.data.relationships.username_requests.data.length;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Stream from 'flarum/common/utils/Stream';\n\nexport default class ResultsModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.userRequestAttr = `last${this.attrs.nickname ? 'Nickname' : 'Username'}Request`;\n\n    this.request = app.session.user[this.userRequestAttr]();\n\n    this.translationPrefix = `fof-username-request.forum.${this.request.forNickname() ? 'nickname' : 'username'}_modals.results`;\n  }\n\n  className() {\n    return 'ResultsModal Modal';\n  }\n\n  title() {\n    return app.translator.trans(`${this.translationPrefix}.title`);\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          {this.request.status() === 'Approved'\n            ? [\n                <h2>{app.translator.trans(`${this.translationPrefix}.approved`)}</h2>,\n                <h3>{app.translator.trans(`${this.translationPrefix}.new_name`, { name: app.session.user.displayName() })}</h3>,\n              ]\n            : [\n                <h2>{app.translator.trans(`${this.translationPrefix}.rejected`)}</h2>,\n                <h3>{app.translator.trans(`${this.translationPrefix}.reason`, { reason: this.request.reason(), i: <i /> })}</h3>,\n                <p className=\"helpText\">{app.translator.trans(`${this.translationPrefix}.resubmit`)}</p>,\n              ]}\n          <div className=\"Form-group\">\n            <Button className=\"Button Button--primary Button--block\" onclick={this.hide.bind(this)}>\n              {app.translator.trans(`${this.translationPrefix}.dismiss_button`)}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  onremove() {\n    app.session.user[this.userRequestAttr] = Stream();\n    this.request.save({ delete: true });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","import app from 'flarum/forum/app';\n\nexport default class RequestsListState {\n  constructor(app) {\n    this.app = app;\n\n    /**\n     * Whether or not the flags are loading.\n     *\n     * @type {Boolean}\n     */\n    this.loading = false;\n\n    this.cache = [];\n  }\n\n  load() {\n    if (app.cache.username_requests) {\n      return;\n    }\n\n    this.loading = true;\n    m.redraw();\n\n    app.store\n      .find('username-requests')\n      .then((requests) => {\n        delete requests.payload;\n        app.cache.username_requests = requests.sort((a, b) => a.createdAt() - b.createdAt());\n      })\n      .catch(() => {})\n      .then(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/User'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/computed'];","import Model from 'flarum/common/Model';\nimport computed from 'flarum/common/utils/computed';\n\nimport type User from 'flarum/common/models/User';\n\nexport default class UsernameRequest extends Model {\n  user() {\n    return Model.hasOne<User>('user').call(this);\n  }\n\n  status() {\n    return Model.attribute<string | null>('status').call(this);\n  }\n\n  reason() {\n    return Model.attribute<string | null>('reason').call(this);\n  }\n\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate).call(this);\n  }\n\n  forNickname() {\n    return Model.attribute<boolean>('forNickname').call(this);\n  }\n\n  _requestedUsername() {\n    return Model.attribute<string | null>('requestedUsername').call(this);\n  }\n\n  requestedUsername() {\n    return computed('_requestedUsername', 'forNickname', 'user', function (newName, forNickname, user) {\n      return newName === null && forNickname ? (user as User).username() : newName;\n    }).call(this);\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","import app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\n\nimport RequestsList from './RequestsList';\n\nexport default class RequestsPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.history.push('requests');\n\n    app.usernameRequests.load();\n\n    this.bodyClass = 'App--requests';\n  }\n\n  view() {\n    return (\n      <div className=\"RequestsPage\">\n        <RequestsList state={app.usernameRequests}></RequestsList>\n      </div>\n    );\n  }\n}\n","import UserPage from 'flarum/forum/components/UserPage';\nimport humanTime from 'flarum/common/helpers/humanTime';\n\nexport default class ProfileConfigurePane extends UserPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loading = true;\n\n    this.loadUser(m.route.param('username'));\n  }\n\n  content() {\n    return (\n      <table className=\"NotificationGrid\">\n        {this.user\n          .usernameHistory()\n          .slice(0)\n          .reverse()\n          .map((username) => {\n            var oldUsername = Object.keys(username)[0];\n            return (\n              <tr>\n                <td>{oldUsername}</td>\n                <td>{humanTime(this.calculateTime(username[oldUsername]))}</td>\n              </tr>\n            );\n          })}\n      </table>\n    );\n  }\n\n  show(user) {\n    this.user = user;\n\n    m.redraw();\n  }\n\n  calculateTime(time) {\n    var d = new Date(0);\n    return d.setUTCSeconds(time);\n  }\n}\n","import Extend from 'flarum/common/extenders';\nimport User from 'flarum/common/models/User';\nimport UsernameRequest from './models/UsernameRequest';\n\nimport RequestsPage from './components/RequestsPage';\nimport ProfilePage from './components/ProfilePage';\n\nexport default [\n  new Extend.Routes() //\n    .add('username_requests', '/username-requests', RequestsPage)\n    .add('username_history', '/u/:username/history', ProfilePage),\n\n  new Extend.Store() //\n    .add('username-requests', UsernameRequest),\n\n  new Extend.Model(User) //\n    .hasOne<UsernameRequest>('lastNicknameRequest')\n    .hasOne<UsernameRequest>('lastUsernameRequest')\n    .attribute<UsernameRequest[] | null>('usernameHistory'),\n];\n","import app from 'flarum/forum/app';\nimport addRequestSetting from './extenders/addRequestSetting';\nimport addRequestDropdown from './extenders/addRequestDropdown';\nimport checkForApproval from './extenders/checkForApproval';\nimport addProfilePage from './extenders/addProfilePage';\nimport RequestsListState from './states/RequestsListState';\n\nexport { default as extend } from './extend';\n\napp.initializers.add('fof-username-request', () => {\n  app.usernameRequests = new RequestsListState(app);\n\n  addRequestSetting();\n  addRequestDropdown();\n  checkForApproval();\n  addProfilePage();\n});\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport Button from 'flarum/common/components/Button';\nimport SettingsPage from 'flarum/forum/components/SettingsPage';\nimport RequestModal from '../components/RequestModal';\n\nexport default function () {\n  extend(SettingsPage.prototype, 'accountItems', function (items) {\n    if (app.forum.attribute('canRequestUsername')) {\n      items.add(\n        'username-request',\n        Button.component(\n          {\n            className: 'Button',\n            onclick: () => {\n              app.modal.show(RequestModal);\n            },\n          },\n          app.translator.trans('fof-username-request.forum.settings.username_request_button')\n        ),\n        8\n      );\n    }\n    if (\n      app.forum.attribute('displayNameDriver') === 'nickname' &&\n      app.forum.attribute('canRequestNickname') &&\n      !this.user.attribute('canEditOwnNickname') &&\n      'flarum-nicknames' in flarum.extensions\n    ) {\n      items.add(\n        'nickname-request',\n        Button.component(\n          {\n            className: 'Button',\n            onclick: () => {\n              app.modal.show(RequestModal, { nickname: true });\n            },\n          },\n          app.translator.trans('fof-username-request.forum.settings.nickname_request_button')\n        ),\n        8\n      );\n    }\n  });\n}\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport HeaderSecondary from 'flarum/forum/components/HeaderSecondary';\nimport RequestsDropdown from '../components/RequestsDropdown';\n\nexport default function () {\n  extend(HeaderSecondary.prototype, 'items', function (items) {\n    if (\n      (app.forum.data.relationships.username_requests &&\n        app.forum.data.relationships.username_requests.data.length &&\n        !app.cache.username_requests) ||\n      (app.cache.username_requests && app.cache.username_requests.length !== 0)\n    ) {\n      items.add('UsernameRequests', <RequestsDropdown state={app.usernameRequests} />, 20);\n    }\n  });\n}\n","import app from 'flarum/forum/app';\nimport ResultsModal from '../components/ResultsModal';\n\nexport default function () {\n  return new Promise(() => {\n    setTimeout(() => {\n      if (app.session.user) {\n        const approvedNickname = app.session.user.lastNicknameRequest() && app.session.user.lastNicknameRequest().status() !== 'Sent';\n        const approvedUsername = app.session.user.lastUsernameRequest() && app.session.user.lastUsernameRequest().status() !== 'Sent';\n        if (approvedNickname || approvedUsername) {\n          app.modal.show(ResultsModal, { nickname: approvedNickname });\n        }\n      }\n    }, 1000);\n  });\n}\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport UserPage from 'flarum/forum/components/UserPage';\n\nexport default function () {\n  extend(UserPage.prototype, 'navItems', function (items) {\n    if (this.user.usernameHistory()) {\n      items.add(\n        'username-requests',\n        LinkButton.component(\n          {\n            href: app.route('username_history', { username: this.user.slug() }),\n            icon: 'fas fa-user-edit',\n          },\n          app.translator.trans('fof-username-request.forum.user.name_history_link')\n        )\n      );\n    }\n  });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","_inheritsLoose","create","constructor","RequestModal","_Modal","apply","arguments","_proto","oninit","vnode","this","username","Stream","attrs","nickname","app","user","displayName","userRequestAttr","lastRequest","requestedUsername","success","password","translationPrefix","className","title","trans","content","m","Button","onclick","hide","name","type","placeholder","bidi","disabled","deleteLoading","submitLoading","attribute","loading","deleteRequest","preventDefault","successAlert","show","onsubmit","_this","alert","currentAttr","createRecord","save","forNickname","meta","errorHandler","onerror","then","request","alertAttrs","loaded","error","status","Modal","ActionModal","approved","reason","requestedName","checked","withAttr","oninput","action","username_requests","some","i","id","splice","redraw","FlagList","_Component","view","requests","length","map","prefix","showModal","avatar","icon","humanTime","createdAt","LoadingIndicator","Component","RequestsDropdown","_NotificationsDropdow","initAttrs","label","getMenu","menuClassName","menuClick","showing","RequestsList","component","state","goToRoute","route","set","getUnreadCount","data","relationships","getNewCount","NotificationsDropdown","ResultsModal","onremove","delete","RequestsListState","cache","load","find","payload","sort","b","UsernameRequest","_Model","Model","_requestedUsername","computed","newName","RequestsPage","_Page","push","bodyClass","Page","ProfileConfigurePane","_UserPage","loadUser","param","usernameHistory","slice","reverse","oldUsername","keys","calculateTime","time","Date","setUTCSeconds","UserPage","Extend","add","ProfilePage","User","hasOne","extend","SettingsPage","items","extensions","HeaderSecondary","Promise","setTimeout","approvedNickname","lastNicknameRequest","approvedUsername","lastUsernameRequest","LinkButton","href","slug"],"sourceRoot":""}